{"ast":null,"code":"export default {\n  data() {\n    return {\n      username: \"\",\n      population: 4,\n      roomid: \"\",\n      CanJump: false\n    };\n  },\n\n  methods: {\n    onSubmit(values) {\n      //判断是创建房间还是加入房间\n      if (values.population) {\n        //产生一个房间号\n        this.roomid = this.getRandomSixNum(); //创建房间\n\n        this.socket.emit(\"createRoom\", {\n          username: values.username,\n          roomid: this.roomid,\n          population: values.population,\n          isHost: true\n        });\n      }\n\n      if (values.roomid) {\n        this.socket.emit(\"addRoom\", {\n          username: values.username,\n          roomid: this.roomid\n        });\n      }\n    },\n\n    getRandomSixNum() {\n      let RandomSixStr = \"\";\n\n      for (let i = 0; i < 6; i++) {\n        RandomSixStr += String(Math.floor(Math.random() * 10));\n      }\n\n      return RandomSixStr;\n    }\n\n  },\n  props: [\"isHost\"],\n\n  created() {\n    //绑定成功事件\n    this.$bus.$on(\"createRoom\", detail => {\n      this.CanJump = true;\n\n      if (this.CanJump) {\n        // 该他妈跳转了\n        //传递房间号到desk组件\n        window.setTimeout(() => {\n          this.$router.replace(\"/desk\");\n          window.setTimeout(() => {\n            console.log(\"生成的房间号\", this.roomid);\n            this.$bus.$emit(\"receiveRoomId\", this.roomid);\n          }, 100);\n        }, 2000);\n      }\n    });\n    this.$bus.$on(\"playjumpRoom\", playerData => {\n      //传递房间号到desk组件,本体已经跳转过了，所以这里不在跳转，nice\n      const isJump = playerData.filter(item => {\n        if (item.username === this.username) {\n          return true;\n        }\n\n        return false;\n      });\n      if (isJump) this.$router.replace(\"/desk\");\n      window.setTimeout(() => {\n        this.$bus.$emit(\"receiveRoomId\", this.roomid);\n      }, 100);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AA0DA;EACAA;IACA;MACAC,YADA;MAEAC,aAFA;MAGAC,UAHA;MAIAC;IAJA;EAMA,CARA;;EASAC;IACAC;MACA;MACA;QACA;QACA,qCAFA,CAGA;;QACA;UACAL,yBADA;UAEAE,mBAFA;UAGAD,6BAHA;UAIAK;QAJA;MAMA;;MACA;QACA;UACAN,yBADA;UAEAE;QAFA;MAIA;IACA,CApBA;;IAqBAK;MACA;;MACA;QACAC;MACA;;MACA;IACA;;EA3BA,CATA;EAsCAC,iBAtCA;;EAuCAC;IACA;IACA;MACA;;MACA;QACA;QAEA;QACAC;UACA;UACAA;YACAC;YACA;UACA,CAHA,EAGA,GAHA;QAIA,CANA,EAMA,IANA;MAOA;IACA,CAdA;IAeA;MACA;MACA;QACA;UACA;QACA;;QACA;MACA,CALA;MAMA;MAEAD;QACA;MACA,CAFA,EAEA,GAFA;IAGA,CAbA;EAcA;;AAtEA","names":["data","username","population","roomid","CanJump","methods","onSubmit","isHost","getRandomSixNum","RandomSixStr","props","created","window","console"],"sourceRoot":"src/components/Tip","sources":["Tip.vue"],"sourcesContent":["<template>\r\n  <div class=\"tips\">\r\n    <transition-group\r\n      appear\r\n      name=\"animate__animated\"\r\n      enter-active-class=\"animate__fadeInLeft animate__animated\"\r\n      leave-active-class=\"animate__fadeOut animate__animated\"\r\n    >\r\n      <van-form @submit=\"onSubmit\" v-if=\"!CanJump\" key=\"roomform\">\r\n        <van-field\r\n          v-model=\"username\"\r\n          name=\"username\"\r\n          label=\"游戏内名称\"\r\n          placeholder=\"此处最好填入您的真实姓名或者外号\"\r\n          :rules=\"[{ required: true, message: '' }]\"\r\n        />\r\n        <van-field\r\n          integer\r\n          v-if=\"isHost\"\r\n          name=\"population\"\r\n          label=\"请选择玩家数量\"\r\n        >\r\n          <template #input>\r\n            <van-stepper v-model=\"population\" min=\"4\" max=\"12\" />\r\n          </template>\r\n        </van-field>\r\n        <van-field\r\n          v-if=\"!isHost\"\r\n          v-model=\"roomid\"\r\n          name=\"roomid\"\r\n          label=\"房间号\"\r\n          placeholder=\"请输入6位房间号\"\r\n          :rules=\"[{ required: true, message: '' }]\"\r\n        />\r\n        <div v-if=\"isHost\" style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" native-type=\"submit\"\r\n            >创建房间</van-button\r\n          >\r\n        </div>\r\n        <div v-else style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" native-type=\"submit\"\r\n            >加入房间</van-button\r\n          >\r\n        </div>\r\n      </van-form>\r\n      <van-loading\r\n        v-if=\"CanJump\"\r\n        size=\"100px\"\r\n        color=\"#0094ff\"\r\n        vertical\r\n        key=\"loading45648\"\r\n        >君莫急躁，我正在帮您创建房间</van-loading\r\n      >\r\n    </transition-group>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: \"\",\r\n      population: 4,\r\n      roomid: \"\",\r\n      CanJump: false,\r\n    };\r\n  },\r\n  methods: {\r\n    onSubmit(values) {\r\n      //判断是创建房间还是加入房间\r\n      if (values.population) {\r\n        //产生一个房间号\r\n        this.roomid = this.getRandomSixNum();\r\n        //创建房间\r\n        this.socket.emit(\"createRoom\", {\r\n          username: values.username,\r\n          roomid: this.roomid,\r\n          population: values.population,\r\n          isHost: true,\r\n        });\r\n      }\r\n      if (values.roomid) {\r\n        this.socket.emit(\"addRoom\", {\r\n          username: values.username,\r\n          roomid: this.roomid,\r\n        });\r\n      }\r\n    },\r\n    getRandomSixNum() {\r\n      let RandomSixStr = \"\";\r\n      for (let i = 0; i < 6; i++) {\r\n        RandomSixStr += String(Math.floor(Math.random() * 10));\r\n      }\r\n      return RandomSixStr;\r\n    },\r\n  },\r\n  props: [\"isHost\"],\r\n  created() {\r\n    //绑定成功事件\r\n    this.$bus.$on(\"createRoom\", (detail) => {\r\n      this.CanJump = true;\r\n      if (this.CanJump) {\r\n        // 该他妈跳转了\r\n\r\n        //传递房间号到desk组件\r\n        window.setTimeout(() => {\r\n          this.$router.replace(\"/desk\");\r\n          window.setTimeout(() => {\r\n            console.log(\"生成的房间号\", this.roomid);\r\n            this.$bus.$emit(\"receiveRoomId\", this.roomid);\r\n          }, 100);\r\n        }, 2000);\r\n      }\r\n    });\r\n    this.$bus.$on(\"playjumpRoom\", (playerData) => {\r\n      //传递房间号到desk组件,本体已经跳转过了，所以这里不在跳转，nice\r\n      const isJump=playerData.filter(item=>{\r\n        if (item.username===this.username) {\r\n          return true\r\n        }\r\n        return false\r\n      })\r\n      if (isJump) this.$router.replace(\"/desk\");\r\n\r\n      window.setTimeout(() => {\r\n        this.$bus.$emit(\"receiveRoomId\", this.roomid);\r\n      }, 100);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style socped  lang='scss'>\r\n.van-form {\r\n  width: 100%;\r\n  position: absolute;\r\n  margin: 30px 0;\r\n}\r\n.van-field__label {\r\n  width: 7.2em !important;\r\n\r\n  text-align: center !important;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}