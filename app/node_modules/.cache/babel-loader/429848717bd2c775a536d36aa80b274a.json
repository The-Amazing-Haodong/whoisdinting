{"ast":null,"code":"import Boadcast from \"@/components/Boadcast/Boadcast.vue\";\nimport Player from \"@/components/Player/Player.vue\";\nimport AdvertisingBoard from \"@/components/AdvertisingBoard/AdvertisingBoard.vue\";\nexport default {\n  data() {\n    return {\n      roomid: \"\",\n      yourWord: \"西瓜\",\n      //准备数据，渲染桌面\n      playerData: [],\n      isHost: false\n    };\n  },\n\n  methods: {\n    GameStart() {\n      if (this.playerData.length < 4) {\n        this.$notify({\n          type: 'warning',\n          message: '人数不足4人，无法开启游戏'\n        });\n        return;\n      }\n\n      this.socket.emit('gameBegin');\n    }\n\n  },\n  computed: {\n    leftPlayerData() {\n      let length = this.playerData.length;\n      if (length > 12) return [{\n        username: \"erro\",\n        imgSrc: \"https://img1.baidu.com/it/u=592570905,1313515675&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\",\n        id: \"erro\"\n      }];\n      let realCount = 0;\n      if (length % 2 === 0) realCount = length / 2;else realCount = Math.floor(length / 2);\n      return this.playerData.slice(0, realCount);\n    },\n\n    rightPlayerData() {\n      let length = this.playerData.length;\n      if (length > 12) return [{\n        username: \"erro\",\n        imgSrc: \"https://img1.baidu.com/it/u=592570905,1313515675&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\",\n        id: \"erro\"\n      }];\n      let realCount = 0;\n      if (length % 2 === 0) realCount = length / 2;else realCount = Math.floor(length / 2);\n      return this.playerData.slice(realCount);\n    }\n\n  },\n  components: {\n    Boadcast,\n    Player,\n    AdvertisingBoard,\n    Player,\n    AdvertisingBoard\n  },\n\n  beforeCreate() {\n    this.$bus.$on(\"receiveRoomId\", object => {\n      this.roomid = object.roomid;\n    });\n    this.$bus.$on('HeisHost', isHost => {\n      this.isHost = isHost;\n    });\n    this.$bus.$on(\"addRoom\", playerData => {\n      this.playerData = playerData;\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAsCA;AACA;AACA;AACA;EACAA;IACA;MACAC,UADA;MAEAC,cAFA;MAGA;MACAC,cAJA;MAKAC;IALA;EAOA,CATA;;EAUAC;IACAC;MACA;QACA;UAAAC;UAAAC;QAAA;QACA;MACA;;MACA;IACA;;EAPA,CAVA;EAmBAC;IACAC;MACA;MACA,iBACA,QACA;QACAC,gBADA;QAEAC,QACA,6FAHA;QAIAC;MAJA,CADA;MAQA;MACA,kDACAC;MACA;IACA,CAhBA;;IAiBAC;MACA;MACA,iBACA,QACA;QACAJ,gBADA;QAEAC,QACA,6FAHA;QAIAC;MAJA,CADA;MAQA;MACA,kDACAC;MACA;IACA;;EAhCA,CAnBA;EAqDAE;IACAC,QADA;IAEAC,MAFA;IAGAC,gBAHA;IAIAD,MAJA;IAKAC;EALA,CArDA;;EA4DAC;IACA;MACA;IACA,CAFA;IAGA;MACA;IACA,CAFA;IAGA;MACA;IACA,CAFA;EAGA;;AAtEA","names":["data","roomid","yourWord","playerData","isHost","methods","GameStart","type","message","computed","leftPlayerData","username","imgSrc","id","realCount","rightPlayerData","components","Boadcast","Player","AdvertisingBoard","beforeCreate"],"sourceRoot":"src/views/Desk","sources":["Desk.vue"],"sourcesContent":["<template>\r\n  <div class=\"desk\">\r\n    <!-- 上面区域 -->\r\n    <boadcast />\r\n    <div class=\"content\">\r\n      <!-- 左边区域 -->\r\n      <div class=\"left\">\r\n        <player\r\n          v-for=\"item in leftPlayerData\"\r\n          :key=\"item.id\"\r\n          :src=\"item.imgSrc\"\r\n          :username=\"item.username\"\r\n        />\r\n      </div>\r\n      <!-- 中间区域 -->\r\n      <div class=\"mid\">\r\n        <advertising-board>房间号:{{ roomid }}</advertising-board>\r\n        <p>我的词语:{{ yourWord }}</p>\r\n        <van-button size=\"large\" v-if=\"isHost\" round hairline icon=\"guide-o\" type=\"primary\" @click=\"GameStart\"\r\n          >开始游戏</van-button\r\n        >\r\n      </div>\r\n      <!-- 右边区域 -->\r\n      <div class=\"right\">\r\n        <player\r\n          v-for=\"item in rightPlayerData\"\r\n          :key=\"item.id\"\r\n          :src=\"item.imgSrc\"\r\n          :username=\"item.username\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 下边区域 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Boadcast from \"@/components/Boadcast/Boadcast.vue\";\r\nimport Player from \"@/components/Player/Player.vue\";\r\nimport AdvertisingBoard from \"@/components/AdvertisingBoard/AdvertisingBoard.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      roomid: \"\",\r\n      yourWord: \"西瓜\",\r\n      //准备数据，渲染桌面\r\n      playerData: [],\r\n      isHost: false,\r\n    };\r\n  },\r\n  methods:{\r\n    GameStart(){\r\n      if (this.playerData.length<4) {\r\n        this.$notify({type:'warning',message:'人数不足4人，无法开启游戏'})\r\n        return\r\n      }\r\n      this.socket.emit('gameBegin')\r\n    }\r\n  },\r\n  computed: {\r\n    leftPlayerData() {\r\n      let length = this.playerData.length;\r\n      if (length > 12)\r\n        return [\r\n          {\r\n            username: \"erro\",\r\n            imgSrc:\r\n              \"https://img1.baidu.com/it/u=592570905,1313515675&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\",\r\n            id: \"erro\",\r\n          },\r\n        ];\r\n      let realCount = 0;\r\n      if (length % 2 === 0) realCount = length / 2;\r\n      else realCount = Math.floor(length / 2);\r\n      return this.playerData.slice(0, realCount);\r\n    },\r\n    rightPlayerData() {\r\n      let length = this.playerData.length;\r\n      if (length > 12)\r\n        return [\r\n          {\r\n            username: \"erro\",\r\n            imgSrc:\r\n              \"https://img1.baidu.com/it/u=592570905,1313515675&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\",\r\n            id: \"erro\",\r\n          },\r\n        ];\r\n      let realCount = 0;\r\n      if (length % 2 === 0) realCount = length / 2;\r\n      else realCount = Math.floor(length / 2);\r\n      return this.playerData.slice(realCount);\r\n    },\r\n  },\r\n  components: {\r\n    Boadcast,\r\n    Player,\r\n    AdvertisingBoard,\r\n    Player,\r\n    AdvertisingBoard,\r\n  },\r\n  beforeCreate() {\r\n    this.$bus.$on(\"receiveRoomId\", (object) => {\r\n      this.roomid = object.roomid;\r\n    });\r\n    this.$bus.$on('HeisHost',isHost=>{\r\n      this.isHost=isHost\r\n    })\r\n    this.$bus.$on(\"addRoom\", (playerData) => {\r\n      this.playerData = playerData;\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.desk {\r\n  height: 100vh;\r\n  background: url(\"@/assets/images/desk.jpg\");\r\n  background-size: 100%;\r\n}\r\n.content {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 80vh;\r\n\r\n  .left {\r\n    flex: 1;\r\n  }\r\n  .mid {\r\n    position: relative;\r\n    flex: 2;\r\n    text-align: center;\r\n    .van-button {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%) translateY(-50%);\r\n    }\r\n  }\r\n  .right {\r\n    flex: 1;\r\n  }\r\n  .left,\r\n  .right {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}